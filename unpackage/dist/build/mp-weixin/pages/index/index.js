(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"079ed":function(e,t,n){"use strict";(function(e){n("e3e7");a(n("66fd"));var t=a(n("9d6e"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"0f7f":function(e,t,n){},"10c1":function(e,t,n){"use strict";var a=n("d2b7"),o=n.n(a);o.a},"41d1":function(e,t,n){"use strict";var a=n("0f7f"),o=n.n(a);o.a},"47ae":function(e,t,n){"use strict";n.r(t);var a=n("55bb"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},"55bb":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{manufactor:0,distributor:0,banner:[],merchant_0:[],merchant_1:[],totalinfo:[],cloneTotalinfo:[]}},onLoad:function(){this.autologin()},onShow:function(){this.getBanner(),this.getList(),this.getMoreList(),this.static(),this.getRequireSupply()},methods:{autologin:function(){var t=this;e.login({provider:"weixin",success:function(n){console.log("是否登录",n.code),t.$request({url:"/api/user/getWxMiniProgramSessionKey",data:{code:n.code,autoLogin:1},success:function(n){if(1!=n.code)return console.log("不是你本人的token"),!1;n.data.openid,n.data.session_key;var a=n.data.token;a?(e.setStorageSync("token",a),t.$store.commit("changeLoginState",!0),t.$request({url:"/api/user/index",data:{token:a},success:function(n){console.log("用户中心",n);var a={id:n.data.user.id,nickName:n.data.user.nickname,avatar:n.data.user.avatar,money:n.data.user.money,pid:n.data.user.pid,type:n.data.user.type};t.$store.commit("setUserInfo",a);var o=n.data.user.is_vip;e.$emit("vipStatus",o),e.setStorage({key:"isVip",data:o})}})):console.log("你还没有授权，无法自动登录！")}})}})},getBanner:function(){var t=this;this.$request({url:"/api/decorate/banner",success:function(n){if(0===n.code)return e.showToast({icon:"none",title:n.msg,duration:3e3}),!1;t.banner=n.data}})},getList:function(){var t=this;this.$request({url:"/api/store/index",method:"GET",data:{type:0},success:function(n){if(0===n.code)return e.showToast({icon:"none",title:n.msg,duration:3e3}),!1;t.merchant_0=n.data.slice(0,4),console.log(n,"首页厂家")}})},getMoreList:function(){var t=this;this.$request({url:"/api/store/index",method:"GET",data:{type:1},success:function(n){if(0===n.code)return e.showToast({icon:"none",title:n.msg,duration:3e3}),!1;t.merchant_1=n.data.slice(0,4),console.log(n,"首页经销商")}})},static:function(){var t=this;this.$request({url:"/api/store/statistics",success:function(n){if(0===n.code)return e.showToast({icon:"none",title:n.msg,duration:3e3}),!1;t.manufactor=n.data.manufactor,t.distributor=n.data.distributor}})},getRequireSupply:function(){var t=this;this.$request({url:"/api/supply/index",method:"POST",success:function(n){if(n&&n.code&&1!==n.code)return e.showToast({title:n.msg,icon:"none"}),!1;console.log("供求",n.data.data),t.totalinfo=n.data.data;for(var a=[],o=0;o<t.totalinfo.length;o++)a.push(t.totalinfo[o]);t.cloneTotalinfo=a}})},handleClick:function(t){console.log("dianle",t),e.navigateTo({url:"/pages/merchants/merchant-into-store/index?id="+t})},goDetailsPage:function(t){switch(t){case"supply":e.setStorageSync("tabBarIndex","fromHomePage1"),e.switchTab({url:"/pages/require/index"});break;case"require":e.setStorageSync("tabBarIndex","fromHomePage2"),e.switchTab({url:"/pages/require/index"});break;case"merchant":e.navigateTo({url:"/pages/me/merchant-enter/index"});break;case"supNeed":e.setStorageSync("tabBarIndex",0),e.switchTab({url:"/pages/require/index"})}},toMerchantPage:function(t){switch(console.log(t),t){case"manufacturers":this.$store.state.pageIndex=0,e.switchTab({url:"../merchants/index"});break;case"dealer":this.$store.state.pageIndex=1,e.switchTab({url:"../merchants/index"});break}},goDetails:function(t){var n=this.cloneTotalinfo;console.log("传递数组",n),e.navigateTo({url:"/pages/require/details/index?id="+t+"&arr="+JSON.stringify(n)})}}};t.default=n}).call(this,n("543d")["default"])},"9d6e":function(e,t,n){"use strict";n.r(t);var a=n("c348"),o=n("47ae");for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("41d1"),n("10c1");var r,s=n("f0c5"),u=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"0bf82a06",null,!1,a["a"],r);t["default"]=u.exports},c348:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var a={uSwiper:function(){return n.e("node-modules/uview-ui/components/u-swiper/u-swiper").then(n.bind(null,"2198"))},uGap:function(){return n.e("node-modules/uview-ui/components/u-gap/u-gap").then(n.bind(null,"dd55"))},uImage:function(){return n.e("node-modules/uview-ui/components/u-image/u-image").then(n.bind(null,"7583"))},uButton:function(){return n.e("node-modules/uview-ui/components/u-button/u-button").then(n.bind(null,"8626"))},uTag:function(){return n.e("node-modules/uview-ui/components/u-tag/u-tag").then(n.bind(null,"48c1"))}},o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.totalinfo.length>0?e.totalinfo.slice(0,6):null);e._isMounted||(e.e0=function(t,n){var a=arguments[arguments.length-1].currentTarget.dataset,o=a.eventParams||a["event-params"];n=o.item4;return e.goDetails(n.id)}),e.$mp.data=Object.assign({},{$root:{l0:n}})},i=[]},d2b7:function(e,t,n){}},[["079ed","common/runtime","common/vendor"]]]);