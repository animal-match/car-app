(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/merchants/index"],{"215f":function(t,e,i){"use strict";(function(t){i("e3e7");n(i("66fd"));var e=n(i("3bdd"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"228d":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uTabs:function(){return Promise.all([i.e("common/vendor"),i.e("node-modules/uview-ui/components/u-tabs/u-tabs")]).then(i.bind(null,"72f6"))},uForm:function(){return i.e("node-modules/uview-ui/components/u-form/u-form").then(i.bind(null,"a7af"))},uFormItem:function(){return Promise.all([i.e("common/vendor"),i.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(i.bind(null,"4674"))},uInput:function(){return Promise.all([i.e("common/vendor"),i.e("node-modules/uview-ui/components/u-input/u-input")]).then(i.bind(null,"b6ad"))},uDropdown:function(){return i.e("node-modules/uview-ui/components/u-dropdown/u-dropdown").then(i.bind(null,"1d52"))},uDropdownItem:function(){return i.e("node-modules/uview-ui/components/u-dropdown-item/u-dropdown-item").then(i.bind(null,"26c8"))},uGap:function(){return i.e("node-modules/uview-ui/components/u-gap/u-gap").then(i.bind(null,"dd55"))},uImage:function(){return i.e("node-modules/uview-ui/components/u-image/u-image").then(i.bind(null,"7583"))},uButton:function(){return i.e("node-modules/uview-ui/components/u-button/u-button").then(i.bind(null,"8626"))}},o=function(){var t=this,e=t.$createElement;t._self._c},a=[]},"2d39":function(t,e,i){},"2dcc":function(t,e,i){"use strict";var n=i("6934"),o=i.n(n);o.a},"3bdd":function(t,e,i){"use strict";i.r(e);var n=i("228d"),o=i("ff65");for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("2dcc"),i("4c71");var s,c=i("f0c5"),r=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"f7b25ba8",null,!1,n["a"],s);e["default"]=r.exports},"4c71":function(t,e,i){"use strict";var n=i("2d39"),o=i.n(n);o.a},6934:function(t,e,i){},"764e":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){i.e("components/empty").then(function(){return resolve(i("ca18"))}.bind(null,i)).catch(i.oe)},o={components:{Empty:n},data:function(){return{provinceName:"",cityName:"",countyName:"",scrollTop:0,informations:[],type:"text",form:{searchKey:""},categoryList:[{name:"四驱车1"},{name:"四驱车2"},{name:"四驱车3"},{name:"四驱车4"},{name:"四驱车5"},{name:"四驱车6"},{name:"四驱车7"},{name:"四驱车8"},{name:"四驱车9"},{name:"四驱车10"},{name:"四驱车11"},{name:"四驱车12"},{name:"四驱车13"}],activeItem:1,currentTab:0,id:0,activeId:0,activeId_2:0,provinceCodeList:[],provinceCode:0,cityCodeList:[],cityCode:0,countyCodeList:[],countyCode:0,data:{},tabList:[{name:"厂商"},{name:"经销商"}]}},onHide:function(){delete this.$store.state.pageIndex,console.log("监听页面隐藏")},onShow:function(){console.log("监听页面show");var e=this.$store.state.pageIndex;this.activeId=this.$store.state.activeId,this.activeId_2=this.$store.state.activeId_2,this.id=0===this.currentTab?this.activeId:this.activeId_2,"undefined"!==typeof e&&(console.log("不是Undefined"),t.removeStorageSync("tabBarData"),t.removeStorageSync("tabBarIndex"),this.currentTab=e,this.activeItem=1,this.id=0===this.currentTab?this.activeId:this.activeId_2,this.form.searchKey="",this.provinceName="",this.provinceCode=0,this.cityName="",this.cityCode=0,this.countyName="",this.countyCode=0);var i=t.getStorageSync("tabBarData");Object.keys(i).length>0&&(this.activeItem=i.activeItem,this.id=i.id);var n=t.getStorageSync("tabBarIndex");n&&(this.currentTab=n);var o=t.getStorageSync("tabBarData");o&&(this.id=o.id),this.getCategory(),this.getStoreList(this.provinceCode,this.cityCode,this.countyCode),console.log("onshow的时候5")},onLoad:function(){console.log("监听页面load"),this.getAreaData()},methods:{provinceChange:function(t){var e=this;console.log("点击",t),this.provinceCodeList.forEach((function(i){i.value===t&&(e.provinceName=i.label)})),console.log("省名",this.provinceName),this.provinceCode=t,this.getStoreList(t),this.data={province:t},t&&this.getAreaData(this.data),this.countyCodeList=[]},cityChange:function(t){var e=this;this.cityCodeList.forEach((function(i){i.value===t&&(e.cityName=i.label)})),this.cityCode=t,this.getStoreList(this.provinceCode,t),this.data.city=t,t&&this.getAreaData(this.data,"city")},countyChange:function(t){var e=this;this.countyCodeList.forEach((function(i){i.value===t&&(e.countyName=i.label)})),this.countyCode=t,this.getStoreList(this.provinceCode,this.cityCode,t)},getAreaData:function(e,i){var n=this,o={url:"/api/store/area",success:function(o){if(1!=o.code)return t.showToast({icon:"none",title:o.msg}),!1;e||(n.provinceCodeList=JSON.parse(JSON.stringify(o.data).replace(/name/g,"label"))),e&&"city"!==i&&(n.cityCodeList=JSON.parse(JSON.stringify(o.data).replace(/name/g,"label"))),e&&"city"===i&&(n.countyCodeList=JSON.parse(JSON.stringify(o.data).replace(/name/g,"label")))}};e&&(o.data=e),this.$request(o)},getCategory:function(){var e=this;this.$request({url:"/api/category/getList",method:"POST",data:{type:this.currentTab},success:function(i){if(0===i.code)return t.showToast({icon:"none",title:i.msg,duration:3e3}),!1;e.categoryList=i.data||[]}})},getStoreList:function(e,i,n){var o=this;this.$request({url:"/api/category/index",method:"POST",data:{type:this.currentTab,id:this.id,keyword:this.form.searchKey,province_id:e||"",city_id:i||"",area_id:n||""},success:function(e){if(0===e.code)return t.showToast({icon:"none",title:e.msg,duration:3e3}),!1;console.log(e.data,"商家列表"),o.informations=e.data}})},search:function(){var t=this.provinceCode,e=this.cityCode,i=this.countyCode;this.getStoreList(t,e,i),console.log("搜索2")},change:function(e){this.activeItem=1,this.id=0===e?this.activeId:this.activeId_2;var i={activeItem:this.activeItem,id:this.id};t.setStorageSync("tabBarData",i),this.form.searchKey="",this.currentTab=e,this.getCategory(),this.getStoreList(),console.log("切换顶部3"),t.setStorageSync("tabBarIndex",e),this.clearArea(),this.provinceName="",this.cityName="",this.countyName=""},clearArea:function(){this.provinceCodeList=[],this.provinceCode=0,this.cityCodeList=[],this.cityCode=0,this.countyCodeList=[],this.countyCode=0,this.getAreaData()},switchTab:function(e,i){console.log("index",e,"id",i),this.form.searchKey="",this.activeItem=e+1,this.id=i,console.log("id是几何",this.id),this.getStoreList(),console.log("切换左侧4");var n={activeItem:this.activeItem,id:this.id};t.setStorageSync("tabBarData",n),this.clearArea(),this.provinceName="",this.cityName="",this.countyName=""},scrolltolower:function(t){console.log("滚动到底部了",t)},goToStore:function(e){t.navigateTo({url:"/pages/merchants/merchant-into-store/index?id="+e})}}};e.default=o}).call(this,i("543d")["default"])},ff65:function(t,e,i){"use strict";i.r(e);var n=i("764e"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a}},[["215f","common/runtime","common/vendor"]]]);