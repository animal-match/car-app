(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/merchant-enter/index"],{1368:function(e,o,t){"use strict";t.r(o);var n=t("55a8"),i=t("1d9a");for(var r in i)"default"!==r&&function(e){t.d(o,e,(function(){return i[e]}))}(r);t("dcbf"),t("413d");var s,u=t("f0c5"),a=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,"21e193c9",null,!1,n["a"],s);o["default"]=a.exports},"1d9a":function(e,o,t){"use strict";t.r(o);var n=t("b2df"),i=t.n(n);for(var r in n)"default"!==r&&function(e){t.d(o,e,(function(){return n[e]}))}(r);o["default"]=i.a},"413d":function(e,o,t){"use strict";var n=t("9355"),i=t.n(n);i.a},"55a8":function(e,o,t){"use strict";t.d(o,"b",(function(){return i})),t.d(o,"c",(function(){return r})),t.d(o,"a",(function(){return n}));var n={uGap:function(){return t.e("node-modules/uview-ui/components/u-gap/u-gap").then(t.bind(null,"dd55"))},uForm:function(){return t.e("node-modules/uview-ui/components/u-form/u-form").then(t.bind(null,"a7af"))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,"4674"))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-input/u-input")]).then(t.bind(null,"b6ad"))},uButton:function(){return t.e("node-modules/uview-ui/components/u-button/u-button").then(t.bind(null,"8626"))},uSelect:function(){return t.e("node-modules/uview-ui/components/u-select/u-select").then(t.bind(null,"d4ef"))},uRadioGroup:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-radio-group/u-radio-group")]).then(t.bind(null,"915d"))},uRadio:function(){return t.e("node-modules/uview-ui/components/u-radio/u-radio").then(t.bind(null,"8848"))},uCheckboxGroup:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(t.bind(null,"8cbd"))},uCheckbox:function(){return t.e("node-modules/uview-ui/components/u-checkbox/u-checkbox").then(t.bind(null,"b811"))},uImage:function(){return t.e("node-modules/uview-ui/components/u-image/u-image").then(t.bind(null,"7583"))},uIcon:function(){return t.e("node-modules/uview-ui/components/u-icon/u-icon").then(t.bind(null,"5165"))}},i=function(){var e=this,o=e.$createElement;e._self._c},r=[]},"7f02":function(e,o,t){"use strict";(function(e){t("e3e7");n(t("66fd"));var o=n(t("1368"));function n(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,t("543d")["createPage"])},9355:function(e,o,t){},b2df:function(e,o,t){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var t={data:function(){var e=this;return{alert:!1,areaList:[],showAreaList:!1,logoUrl:"",majorUrl:"",showLogoBtn:!0,showMajorBtn:!0,border:!0,showRegion:!1,tagList:[],imageTitle:[],videoTitle:[],RadioList:[{name:"厂商",id:"0"},{name:"经销商",id:"1"}],form:{area:"",province_id:"",city_id:"",area_id:"",storeType:"0",merchantName:"",merchantIntro:"",id:"",name:"",phoneNo:"",address:"",selected:{longitude:"",latitude:""}},rules:{merchantName:[{required:!0,message:"请输入厂家名称",trigger:["change","blur"]}],merchantIntro:[{required:!0,message:"如：24管控制器，国际1200瓦电机，双梁等",trigger:["change","blur"]}],id:[{validator:function(e,o,t){return console.log(o,"选了什么"),!!o},message:"请选择标签",trigger:["change","blur"]}],phoneNo:[{required:!0,message:"请输入电话号码",trigger:["change","blur"]},{validator:function(o,t,n){return e.$u.test.mobile(t)},message:"手机号码格式不正确",trigger:["blur"]}],address:[{validator:function(e,o,t){return console.log(o,"选了什么"),o.length>0},message:"请选择地址",trigger:["change","blur"]}],area:[{validator:function(e,o,t){return o.length>0},message:"请选择地区",trigger:["change","blur"]}]},action:"",fileList:[]}},computed:{address:function(){return this.form.address.length>0?this.form.address:""}},onLoad:function(){e.$on("addressInfo",this.addressInfos),e.$on("proDatas",this.productDatas),e.$on("proDatas2",this.productDatas2),this.getTags(),this.getArea()},onShow:function(){var o=e.getStorageSync("token");o||e.showToast({icon:"none",title:"请登录后操作"})},methods:{getArea:function(){var o=this,t={url:"/api/store/getArea",method:"POST",success:function(t){if(1!=t.code)return e.showToast({icon:"none",title:t.msg}),!1;var n=t.data,i=JSON.stringify(n),r=JSON.parse(i);o.areaList=r,console.log("地区数据",o.areaList)}};this.$request(t)},radioChange:function(e){this.form.storeType=e,this.getTags()},chooseImages:function(o){var t=this,n=e.getStorageSync("token");n?e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(n){var i=n.tempFilePaths;console.log(i,"你选择的图片"),i.length>=1&&"logo"===o?t.showLogoBtn=!1:t.showMajorBtn=!1,e.uploadFile({url:"https://www.cdyanxu.com/api/common/upload",header:{"content-type":"multipart/form-data",token:e.getStorageSync("token")},filePath:n.tempFilePaths[0],name:"file",success:function(e){console.log(e.data,"res!!");var n=JSON.parse(e.data);"logo"===o?t.logoUrl=n.data.fullurl:t.majorUrl=n.data.fullurl,console.log("logo地址",t.logoUrl,t.majorUrl)}})}}):e.showToast({icon:"none",title:"请登录后操作"})},previewImage:function(o){"logo"===o?e.previewImage({current:this.logoUrl,urls:[this.logoUrl]}):e.previewImage({current:this.majorUrl,urls:[this.majorUrl]})},delect:function(o){var t=this;e.showModal({title:"提示",content:"是否要删除该图片",success:function(e){e.confirm&&"logo"===o?(t.logoUrl="",t.showLogoBtn=0==t.logoUrl.length):(t.majorUrl="",t.showMajorBtn=0==t.majorUrl.length)}})},checkboxGroupChange:function(e){this.form.id=e.toString(),console.log(this.form.id,"y")},addressInfos:function(e){console.log(e,"传来的地址对象"),this.form.address=e.address,this.form.selected.longitude=e.longitude,this.form.selected.latitude=e.latitude},productDatas:function(e){this.imageTitle=this.imageTitle.concat(e),console.log("产品名和图",this.imageTitle)},productDatas2:function(e){this.videoTitle=this.videoTitle.concat(e),console.log("产品名和视频",this.videoTitle)},getTags:function(){var o=this;this.$request({url:"/api/category/getList",method:"POST",data:{type:this.form.storeType},success:function(t){if(0==t.code)return e.showToast({icon:"none",title:t.msg}),!1;var n=t.data;n.map((function(e){e.checked=!1})),o.tagList=n}})},chooseAddress:function(){e.navigateTo({url:"./map"})},chooseArea:function(){this.showAreaList=!0},areaConfirm:function(e){console.log("确认地区：",e),this.form.province_id=e[0].value,this.form.city_id=e[1].value,this.form.area_id=e[2].value,console.log("地区表单",this.form),this.form.area=e[0].label+"/"+e[1].label+"/"+e[2].label},jump:function(){e.navigateTo({url:"upload-file"})},submit:function(){var o=this;console.log("777",this.form);var t=this.imageTitle.concat(this.videoTitle);this.$refs.ruleForm.validate((function(n){if(n){if(0==o.imageTitle.length&&0==o.videoTitle.length)return void e.showToast({icon:"none",title:"您还未上传产品"});if(0==o.logoUrl.length)return void e.showToast({icon:"none",title:"您还未上传商标"});if(0==o.majorUrl.length)return void e.showToast({icon:"none",title:"您还未上传店铺封面"});o.toServer(t)}else console.log("失败")}))},toServer:function(o){console.log("访问接口",this.form.selected.latitude),this.$request({url:"/api/store/apply",method:"POST",data:{log:this.logoUrl,image:this.majorUrl,address:this.form.address,store_name:this.form.merchantName,information:this.form.merchantIntro,type:parseInt(this.form.storeType),lat:Number(this.form.selected.latitude),long:Number(this.form.selected.longitude),phone:this.form.phoneNo,store_category_id:this.form.id,goods:JSON.stringify(o),province_id:this.form.province_id,city_id:this.form.city_id,area_id:this.form.area_id},success:function(o){1==o.code?(e.showToast({icon:"success",title:o.msg}),e.navigateTo({url:"/pages/me/index"})):e.showToast({icon:"none",title:o.msg})}})}},onReady:function(){this.$refs.ruleForm.setRules(this.rules)}};o.default=t}).call(this,t("543d")["default"])},dcbf:function(e,o,t){"use strict";var n=t("f901"),i=t.n(n);i.a},f901:function(e,o,t){}},[["7f02","common/runtime","common/vendor"]]]);